---
title: Language Radio
author: Matthew Trost
tags: [education, language, news]
description: Streams audio of any topic you choose, in your target language, at your level.
language: en
announcer_voice: Albert
max_chunks_len: 20
confirm_every: 10
---

<<stdlib>>

<intro>
  <p>
    Welcome to Language Radio!
  </p>
</intro>

<p>
  What language do you want to listen to?
</p>

<input
  key="tl"
  name.type="string"
  name.description="The user will indicate a language they want to practice; extract the language name into this attribute"
  name.fallback="Japanese" />

<p>
  What level are you?
</p>

<input
  key="tl"
  level.type="string"
  level.description="The user will indicate their level at speaking {{tl.name}}. Convert whatever their level is into a proper CEFL level string like A1, B2, etc."
  level.fallback="A1" />

<p>
  And what kind of content do you want to hear?
</p>

<input
  key="topic"
  desc.type="string"
  desc.description="The user will indicate what kind of topic they want to listen to. Take whatever they say and refine/simplify, but keep all important details"
  desc.fallback="world history" />

<p>
  Starting {{tl.level}} level content about {{topic.desc}} in {{tl.name}} ...
</p>

<script>
  wsl.set("chunks", [])
</script>

<var name="i" type="number" value="0" />

<while cond="true">
  <llm:text key="chunk">
    Create a text script for an original audio program in {{tl.name}}.
    The listener wants the program to be in {{tl.name}} on this topic: {{topic.desc}}
    The grammar and vocab should suit someone who understands {{tl.name}} at a {{tl.level}} level.

    Return about 200 words, or enough for a full minute of listening.
    Do not include any formatting, introductions or ceremony - straight into the content.
    Do not add an intro or outro. Do not indicate the program is ending or beginning.

    <when cond="chunks.length > 0">
      This is the previous content of the program:
      ---
      {$ chunks.join('\n\n') $}
      ---
      Continue where the above leaves off.
      Avoid repeating anything already said.
      Vary your paragraph and sentence structure.
    </when>

    Return only the text:
  </llm:text>

  <p voice="{{announcer_voice}}">
    {{chunk}}
  </p>

  <script>
    wsl.set("chunks", [...chunks, chunk].slice(-max_chunks_len));
  </script>

  <if cond="i > 0 && (i % confirm_every) === 0">
    <p>Continue listening?</p>
    <input-confirm key="confirm" />
    <if cond="!confirm.answer">
      <break />
    </if>
  </if>

  <var name="i" value="{$ i + 1 $}" type="number" />
</while>
