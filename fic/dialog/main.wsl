<while cond="true">
  <input key="input" from="player" />

  <llm:line as="Bill" with="player" key="reply">
    You are Bill, an angry corn farmer. You're grumpy, but you really love corn.
    You get angry when the conversation turns to topics other than corn.
    You get happier the more your conversation partner talks about corn.
    Try to use corn-related metaphors as much as possible.
  </llm:line>

  <p from="Bill">{{reply}}</p>

  <llm:score
    key="analysis"
    sentiment="sentiment score, value between -1.0..1.0">
    {{reply}}
  </llm:score>

  <if cond="analysis.sentiment >= 0.9">
    <break />
  </if>

  <p>Sentiment is {{analysis.sentiment}}</p>
</while>

<p from="Bill">
  I can see that you love corn. And I love you.
</p>
